# STM32学习笔记(四)---RCC

[TOC]

RCC: Reset Clock Control 复位和时钟控制器

## RCC时钟框图---时钟树

![1565245310888](.\图片\1565245310888.png)

### 系统时钟

对应的是图中**黄色**部分,下面的数字标号对应上面的红色标号1-6

#### 1.HSE高速外部时钟信号

HSE是高速的外部时钟信号，可由**有源晶振**或**无源晶振**提供。

当使用**有源晶振**时，时钟从OSC_IN引脚进入，OSC_OUT引脚悬空。

当使用**无源晶振**时，时钟从OSC_IN和OSC_OUT进入，并且要配谐振电容。

**注意：**<u>当HSE故障时候，不仅HSE会被关闭，PLL也会被关闭，此时高速的内部时钟信号HSI会作为备用的系统时钟，直到HSE回复正常，HSI=16M。</u>

#### 2.锁相环PLL

PLL的主要作用是对时钟进行倍频，然后把时钟输出到各个功能部件。

#### 3.系统时钟SYSCLK

系统的时钟来源可以是：HSI、PLLCLK、HSE。

通常的系统时钟设置：**SYSCLK = PLLCLK = 168M**。

#### 4.AHB总线时钟HCLK

系统时钟SYSCLK经过AHB预分频器之后得到的时钟叫AHB总线时钟，即HCLK，分频因子可以是：[1,2,4,8,16,64,128,256,512]。

通常设置1分频，则HCLK时钟配置：**HCLK = SYSCLK = 168M**。

#### 5.APB2总线时钟PCLK2

APB2总线时钟PCLK2由HCLK经过高速APB2预分频器得到，分频因子可以是：[1,2,4,8,16]。

通常设置2分频，则**PCLK2 = HCLK / 2 = 84M**。

#### 6.APB1总线时钟PCLK1

APB1总线时钟PCLK1由HCLK经过低速APB预分频器得到，分频因子可以是：[1,2,4,8,16]。

通常设置4分频，则**PCLK1 = HCLK / 4 = 42M**。

### 其他时钟

因平时较少用到，暂时不记录。